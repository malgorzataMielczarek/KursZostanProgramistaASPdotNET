# [LEKCJA 5 – Zależności między projektami](https://kurs.szkoladotneta.pl/zostan-programista-asp-net/tydzien-6-aplikacje-webowe-w-asp-net-core/lekcja-5-zaleznosci-miedzy-projektami/)
Ponieważ zależności pomiędzy projektami (warstwami aplikacji) są ważną częścią onion architecture, w której tworzymy naszą aplikację, więc zdefiniujmy je jeszcze przed rozpoczęciem implementacji naszej aplikacji. Dzięki temu nie będziemy mieć później problemów z używaniem elementów innych bibliotek i unikniemy błędów, próbując uzyskać dostęp do elementów, do których dostępu mieć nie powinniśmy. Nie możemy tworzyć sobie powiązań jak nam w danej chwili wygodnie, gdyż zgodnie z założeniami onion architecture, nie wszystkie projekty powinny "wiedzieć" o sobie nawzajem ("wiedzieć" o swoim istnieniu). Inaczej nie uda nam się utrzymać niezależnych, wymiennych warstw.

## Zależności w naszej aplikacji
### Domena
W domenie (_Domain_) nie zmieniamy nic. Przypomnijmy, że jest to warstwa, która znajduje się w samym środku naszej "cebuli", więc jest ona niezależna od wszystkich innych warstw.
### Infrastruktura
W infrastrukturze (_Infrastructure_) dodajemy referencję do domeny. W tej warstwie będziemy trzymać połączenie do bazy danych i łączyć tabele bazodanowe z modelami domeny. Ma ona implementować interfejsy domeny. Musi więc mieć do niej dostęp. Będą się tu znajdować powiązania związane z _dependency injection_.
### Aplikacja
W aplikacji (_Application_) również dodajemy referencję do domeny. Używamy połączenia z domeną, a nie z infrastrukturą, gdyż implementacja infrastruktury jest dopasowana do konkretnego źródła danych (konkretnej bazy danych), a aplikacja ma być od niego niezależna. Używa więc ona interfejsów domeny. Połączenie konkretnego interfejsu z konkretną implementacją odbywa się dzięki _dependency injection_ o czym dowiemy się więcej w lekcji 9. tego tygodnia.
### Aplikacja webowa
Teoretycznie nasza aplikacja webowa (_UI_) powinna mieć dostęp tylko do aplikacji, gdyż to właśnie do aplikacji nasz UI będzie wysyłać zapytania i to właśnie aplikacja będzie sterować dalszą, związaną z nim, logiką. Aby nieco ułatwić sobie pracę poza powiązaniem do aplikacji dodamy jeszcze jedno powiązanie, do infrastruktury. Zrobimy tak, aby uzyskać dostęp do znajdującego się tam _dependency injection_ i dzięki temu skrócić kod naszej klasy _Startup_. Połączenie to ustanawia się tylko i wyłącznie po to, aby uzyskać dostęp do jednej klasy infrastruktury związanej właśnie z _dependency injection_. Nie będziemy go w żaden sposób wykorzystywać do komunikacji z repozytoriami.